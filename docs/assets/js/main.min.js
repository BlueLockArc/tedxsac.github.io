function showhide(e="",o=""){""!=e&&document.getElementById(e).classList.remove("togglable"),""!=o&&document.getElementById(o).classList.add("togglable")}const sleep=e=>new Promise((o=>setTimeout(o,e)));async function check_email(){$("#continue-btn").hide(),$("#email-loading-icon").show(),$("#email-alert-box").hide();var e=$("#email-input").val();try{const o=await fetch("https://tedxsac.up.railway.app/check/"+e),i=await o.json(),t=o.status;if(200===t)$("#email-check-row").hide(),$("#register-form-row").show();else if(520===t)showEmailAlert(i.msg);else if(222===t)console.log("Payment fully done, show ticket");else if(310===t){let e="";const o=i.msg;"pending"==o?e="Your last payment is pending manual verification.<br>It may take up to 48hrs to verify your payment.<br>You will receive an email upon verification.":"verified"==o?($("#second-name-input").val(i.name),$("#email-check-row").hide(),$("#second-payment-row").show()):o&&(e=o),e&&showEmailAlert(e)}else console.log("Unexpected status code:",t)}catch(e){console.error("Network Error:",e.message),showEmailAlert("Network error. Please try again later.")}finally{$("#email-loading-icon").hide(),$("#continue-btn").show()}}function showEmailAlert(e){$("#email-alert-box").show(),$("#email-alert-text").html(e)}async function submit_form(){$("#submit-btn").hide(),$("#submit-loading").show();var e=$("#name-input").val(),o=$("#email-input").val(),i=window.wa_iti.getNumber(),t=window.ph_iti.getNumber(),l=$('input[name="int-ext"]:checked').val(),a=$("#regno-input").val(),n=$('input[name="partial-full"]:checked').val(),s=$("#upi-ref-input").val();if(e&&o&&i&&l&&n&&s)if(window.wa_iti.isValidNumber())if(t&&!window.ph_iti.isValidNumber())$("#name-input")[0].scrollIntoView({behavior:"smooth"});else if("1"!=l||a){console.log(e,o,i,t,l,a,n,s);try{response=await fetch("https://tedxsac.up.railway.app/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,name:e,wa_number:i,ph_number:t,aloy:l,regno:a,payment_type:n,upi_ref_no:s})});const r=response.status,c=await response.json();if(200===r)return console.log("Form submitted successfully"),$("#register-form-row").hide(),void $("#success-row").show();202===r?console.log("Email already registered"):520===r?($("#modal-para").html(c.msg),$("#modal").modal("show")):console.log("Unexpected status code:",r)}catch(e){console.error("Network Error:",e.message),showEmailAlert("Network error. Please try again later.")}}else console.log(l,a),alert("Please fill all the required fields."),$("#regno-input")[0].scrollIntoView({behavior:"smooth"});else $("#name-input")[0].scrollIntoView({behavior:"smooth"});else alert("Please fill all the required fields.");$("#submit-loading").hide(),$("#submit-btn").show()}async function submit_second(){$("#second-btn").hide(),$("#second-loading").show();var e=$("#upi-ref-input").val();if(e){console.log(e);try{response=await fetch("https://tedxsac.up.railway.app/second",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({upi_ref_no:e})});const o=response.status,i=await response.json();if(200==o)return console.log("Form submitted successfully"),$("#second-payment-row").hide(),void $("#success-row").show();520===o&&($("#modal-para").html(i.msg),$("#modal").modal("show"))}catch(e){console.error("Error:",e)}}else alert("Please fill all the required fields.");$("#second-loading").hide(),$("#second-btn").show()}$(document).on("click touchstart",(function(){var e=$('input[name="int-ext"]:checked').val(),o=$('input[name="partial-full"]:checked').val();e&&(showhide("payment-type-row"),1==e?(showhide("regno-row"),$("#partial-radio-btn").prop("disabled",!1),$("#regno-input").prop("required",!0)):0==e&&(showhide("","regno-row"),$("#partial-radio-btn").prop("disabled",!0),$("#partial-radio-btn").prop("checked",!1),$("#regno-input").prop("required",!1),showhide("full-pay-label","partial-pay-label"))),(o=$('input[name="partial-full"]:checked').val())||showhide("","qr-code-col"),o&&(showhide("qr-code-col"),"partial"==o?showhide("partial-pay-label","full-pay-label"):"full"==o&&showhide("full-pay-label","partial-pay-label"))}));
