function showhide(e="",o=""){""!=e&&document.getElementById(e).classList.remove("togglable"),""!=o&&document.getElementById(o).classList.add("togglable")}const sleep=e=>new Promise((o=>setTimeout(o,e)));async function check_email(){$("#continue-btn").hide(),$("#email-loading-icon").show(),$("#email-alert-box").hide();var e=$("#email-input").val();try{const o=await fetch("https://tedxsac.up.railway.app/check/"+e),t=await o.json(),i=o.status;if(200===i)$("#email-check-row").hide(),$("#register-form-row").show();else if(520===i)showEmailAlert(t.msg);else if(222===i)console.log("Payment fully done, show ticket");else if(310===i){let e="";const o=t.msg;"pending"==o?e="Your last payment is pending manual verification.<br>It may take up to 48hrs to verify your payment.<br>You will receive an email upon verification.":"verified"==o?($("#second-name-input").val(t.name),$("#email-check-row").hide(),$("#second-payment-row").show()):o&&(e=o),e&&showEmailAlert(e)}else console.log("Unexpected status code:",i)}catch(e){console.error("Network Error:",e.message),showEmailAlert("Network error. Please try again later.")}finally{$("#email-loading-icon").hide(),$("#continue-btn").show()}}function showEmailAlert(e){$("#email-alert-box").show(),$("#email-alert-text").html(e)}async function submit_form(){$("#submit-btn").hide(),$("#submit-loading").show();var e=$("#name-input").val(),o=$("#email-input").val(),t=window.wa_iti.getNumber(),i=window.ph_iti.getNumber(),a=$('input[name="int-ext"]:checked').val(),l=$("#regno-input").val(),n=$('input[name="partial-full"]:checked').val(),r=$("#upi-ref-input").val();e&&o&&t&&a&&n&&r?window.wa_iti.isValidNumber()?i&&!window.ph_iti.isValidNumber()?$("#name-input")[0].scrollIntoView({behavior:"smooth"}):"1"!=a||l?(console.log(e,o,t,i,a,l,n,r),await fetch("https://tedxsac.up.railway.app/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,name:e,wa_number:t,ph_number:i,aloy:a,regno:l,payment_type:n,upi_ref_no:r})}).then((async e=>{const o=e.status,t=await e.json();if(200===o)return console.log("Form submitted successfully"),$("#register-form-row").hide(),void $("#success-row").show();202===o?console.log("Email already registered"):520===o?($("#modal-para").html(t.msg),$("#modal").modal("show")):console.log("Unexpected status code:",o)})).catch((e=>{console.error("Error:",e)}))):(console.log(a,l),alert("Please fill all the required fields."),$("#regno-input")[0].scrollIntoView({behavior:"smooth"})):$("#name-input")[0].scrollIntoView({behavior:"smooth"}):alert("Please fill all the required fields."),$("#submit-loading").hide(),$("#submit-btn").show()}async function submit_second(){$("#second-btn").hide(),$("#second-loading").show();var e=$("#upi-ref-input").val();e?(console.log(e),await fetch("https://tedxsac.up.railway.app/second",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({upi_ref_no:e})}).then((async e=>{const o=e.status,t=await e.json();if(200==o)return console.log("Form submitted successfully"),$("#second-payment-row").hide(),void $("#success-row").show();520===o&&($("#modal-para").html(t.msg),$("#modal").modal("show"))})).catch((e=>{console.error("Error:",e)}))):alert("Please fill all the required fields."),$("#second-loading").hide(),$("#second-btn").show()}$(document).on("click touchstart",(function(){var e=$('input[name="int-ext"]:checked').val(),o=$('input[name="partial-full"]:checked').val();e&&(showhide("payment-type-row"),1==e?(showhide("regno-row"),$("#partial-radio-btn").prop("disabled",!1),$("#regno-input").prop("required",!0)):0==e&&(showhide("","regno-row"),$("#partial-radio-btn").prop("disabled",!0),$("#partial-radio-btn").prop("checked",!1),$("#regno-input").prop("required",!1),showhide("full-pay-label","partial-pay-label"))),(o=$('input[name="partial-full"]:checked').val())||showhide("","qr-code-col"),o&&(showhide("qr-code-col"),"partial"==o?showhide("partial-pay-label","full-pay-label"):"full"==o&&showhide("full-pay-label","partial-pay-label"))}));
