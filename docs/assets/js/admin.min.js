const amounts={First:999,Second:301,int_full:1300,ext_full:1600};var db_data;const actions_td='<td class="d-lg-flex align-items-lg-center"><button class="btn btn-info d-flex justify-content-center align-items-center justify-content-xxl-center align-items-xxl-center" type="button" style="margin: 6px;" onclick="view(this)"><svg class="fs-2 justify-content-xxl-center align-items-xxl-center" xmlns="http://www.w3.org/2000/svg" viewBox="0 -32 576 576" width="1em" height="1em" fill="currentColor">\n\x3c!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --\x3e\n<path d="M160 256C160 185.3 217.3 128 288 128C358.7 128 416 185.3 416 256C416 326.7 358.7 384 288 384C217.3 384 160 326.7 160 256zM288 336C332.2 336 368 300.2 368 256C368 211.8 332.2 176 288 176C287.3 176 286.7 176 285.1 176C287.3 181.1 288 186.5 288 192C288 227.3 259.3 256 224 256C218.5 256 213.1 255.3 208 253.1C208 254.7 208 255.3 208 255.1C208 300.2 243.8 336 288 336L288 336zM95.42 112.6C142.5 68.84 207.2 32 288 32C368.8 32 433.5 68.84 480.6 112.6C527.4 156 558.7 207.1 573.5 243.7C576.8 251.6 576.8 260.4 573.5 268.3C558.7 304 527.4 355.1 480.6 399.4C433.5 443.2 368.8 480 288 480C207.2 480 142.5 443.2 95.42 399.4C48.62 355.1 17.34 304 2.461 268.3C-.8205 260.4-.8205 251.6 2.461 243.7C17.34 207.1 48.62 156 95.42 112.6V112.6zM288 80C222.8 80 169.2 109.6 128.1 147.7C89.6 183.5 63.02 225.1 49.44 256C63.02 286 89.6 328.5 128.1 364.3C169.2 402.4 222.8 432 288 432C353.2 432 406.8 402.4 447.9 364.3C486.4 328.5 512.1 286 526.6 256C512.1 225.1 486.4 183.5 447.9 147.7C406.8 109.6 353.2 80 288 80V80z"></path>\n</svg></button><button class="btn btn-success d-flex justify-content-center align-items-center justify-content-xxl-center align-items-xxl-center" type="button" style="margin: 6px;" ondblclick="approve(this)"><svg class="fs-2 justify-content-xxl-center align-items-xxl-center" xmlns="http://www.w3.org/2000/svg" viewBox="-32 0 512 512" width="1em" height="1em" fill="currentColor">\n\x3c!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --\x3e\n<path d="M211.8 339.8C200.9 350.7 183.1 350.7 172.2 339.8L108.2 275.8C97.27 264.9 97.27 247.1 108.2 236.2C119.1 225.3 136.9 225.3 147.8 236.2L192 280.4L300.2 172.2C311.1 161.3 328.9 161.3 339.8 172.2C350.7 183.1 350.7 200.9 339.8 211.8L211.8 339.8zM0 96C0 60.65 28.65 32 64 32H384C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80H64C55.16 80 48 87.16 48 96z"></path>\n</svg></button><button class="btn btn-danger d-flex justify-content-center align-items-center justify-content-xxl-center align-items-xxl-center" type="button" style="margin: 6px;" ondblclick="reject(this)"><svg class="fs-2 justify-content-xxl-center align-items-xxl-center" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em" height="1em" fill="currentColor">\n\x3c!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --\x3e\n<path d="M175 175C184.4 165.7 199.6 165.7 208.1 175L255.1 222.1L303 175C312.4 165.7 327.6 165.7 336.1 175C346.3 184.4 346.3 199.6 336.1 208.1L289.9 255.1L336.1 303C346.3 312.4 346.3 327.6 336.1 336.1C327.6 346.3 312.4 346.3 303 336.1L255.1 289.9L208.1 336.1C199.6 346.3 184.4 346.3 175 336.1C165.7 327.6 165.7 312.4 175 303L222.1 255.1L175 208.1C165.7 199.6 165.7 184.4 175 175V175zM0 96C0 60.65 28.65 32 64 32H448C483.3 32 512 60.65 512 96V416C512 451.3 483.3 480 448 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H448C456.8 432 464 424.8 464 416V96C464 87.16 456.8 80 448 80H64C55.16 80 48 87.16 48 96z"></path>\n</svg></button></td>';async function login(){$("#login-btn").prop("disabled",!0);var t=document.getElementById("token").value;const e=await fetch("http://127.0.0.1:5000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})});statusCode=e.status,520==statusCode?(data=await e.json(),Toastify({text:data.msg,duration:2e3,close:!0,style:{background:"red"}}).showToast()):200==statusCode&&(Toastify({text:"Login Successful",duration:3e3,close:!0,stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast(),$("#login-row").hide(),sessionStorage.setItem("token",t),db_data=await fetchData(),set_data(),$("#table-row").show()),$("#login-btn").prop("disabled",!1)}async function fetchData(){const t=await fetch("http://127.0.0.1:5000/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:sessionStorage.getItem("token")})});return resposeData=await t.json(),520==t.statusCode&&(Toastify({text:resposeData.msg,duration:2e3,close:!0,style:{background:"red"}}).showToast(),$("#login-row").show(),$("#table-row").hide(),sessionStorage.removeItem("token")),resposeData}function set_data(){const t=document.querySelector("tbody");t.innerHTML="",db_data.forEach(((e,n)=>{var[o,s,a,i,d,l,c,r]=e;const C=document.createElement("tr");if("Full"==l)if(d)var f=amounts.int_full;else f=amounts.ext_full;else f=amounts[l];d||(d="External"),i||(i="N/A"),(r=new Date(r)).setHours(r.getHours()+5),r.setMinutes(r.getMinutes()+30),r=r.toLocaleString(),C.innerHTML=`\n            <td data-field=slno>${n+1}</td>\n            <td data-field=email>${o}</td>\n            <td data-field=name>${s}</td>\n            <td data-field=wa_num>${a}</td>\n            <td data-field=ph_num>${i}</td>\n            <td data-field=regno>${d}</td>\n            <td data-field=payment_type>${l}</td>\n            <td data-field=upi_ref>${c}</td>\n            <td data-field=amount>${f}</td>\n            <td data-field=date>${r}</td>\n        `,C.innerHTML+=actions_td,t.appendChild(C)})),$("[data-field='email']").hide(),$("[data-field='name']").hide(),$("[data-field='wa_num']").hide(),$("[data-field='ph_num']").hide()}function remove_row(t,e){t.parentNode.removeChild(t),db_data.splice(e-1,1),set_data()}function get_row(t){return t.parentNode.parentNode}async function approve(t){var e=get_row(t);console.log(e);var n=e.querySelector("[data-field='email']").innerHTML;200==(await fetch("http://127.0.0.1:5000/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:token,email:n})})).status&&(Toastify({text:"Approved Successfully",duration:3e3,close:!0,stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"},onClick:function(){}}).showToast(),slno=e.querySelector("[data-field='slno']").innerHTML,remove_row(e,slno))}$(document).ready((async function(){sessionStorage.getItem("token")?($("#login-row").hide(),$("#table-row").show(),db_data=await fetchData(),set_data()):($("#login-row").show(),$("#table-row").hide())}));